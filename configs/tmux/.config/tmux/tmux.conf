#
# â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
# â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•
#    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ•”â•
#    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—
#    â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—
#    â•šâ•â•   â•šâ•â•     â•šâ•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•
#

#####################################################
# Terminal / True Color
#####################################################
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
set -g focus-events on

#####################################################
# Prefix / Reload
#####################################################
unbind C-b
set -g prefix C-a
bind C-a send-prefix

bind r source-file ~/.config/tmux/tmux.conf \; display-message "ó°‘“ tmux reloaded"

#####################################################
# Indexes
#####################################################
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on

#####################################################
# Comportamento geral
#####################################################
set -g mouse on
# set -g default-shell /bin/zsh
set -g repeat-time 1000
set -g history-limit 15000
set -g status-position bottom

#####################################################
# NavegaÃ§Ã£o de panes (Vim style)
#####################################################
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

#####################################################
# Resize panes
#####################################################
bind -r Left  resize-pane -L 5
bind -r Right resize-pane -R 5
bind -r Up    resize-pane -U 3
bind -r Down  resize-pane -D 3

#####################################################
# Switch windows
#####################################################
bind -n S-Left previous-window
bind -n S-Right next-window
bind -n M-H previous-window
bind -n M-L next-window

#####################################################
# Splits / Windows (path-aware)
#####################################################
unbind %
unbind '"'

bind \\ split-window -h -c "#{pane_current_path}"
bind -  split-window -v -c "#{pane_current_path}"

bind c new-window -c "#{pane_current_path}"
bind -r m resize-pane -Z

#####################################################
# Copy mode (vi)
#####################################################
setw -g mode-keys vi

bind -T copy-mode-vi v   send -X begin-selection
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi y   send -X copy-selection-and-cancel

#####################################################
# Tokyo Night Theme
#####################################################
set -g @tokyo-night-tmux_show_datetime 0
set -g @tokyo-night-tmux_show_path 1
set -g @tokyo-night-tmux_path_format relative
set -g @tokyo-night-tmux_window_id_style dsquare
set -g @tokyo-night-tmux_show_git 0

#####################################################
# Plugins
#####################################################
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# NavegaÃ§Ã£o Vim <C-hjkl> (Neovim <-> tmux)
set -g @plugin 'joshmedeski/vim-tmux-navigator'

# Clipboard
set -g @plugin 'tmux-plugins/tmux-yank'

# Tema
set -g @plugin 'janoamaral/tokyo-night-tmux'

#####################################################
# ğŸ”¥ Session persistence
#####################################################
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Resurrect
set -g @resurrect-capture-pane-contents 'on'
set -g @resurrect-strategy-nvim 'session'
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-processes 'ssh kubectl helm terraform nvim vim'

# Continuum
set -g @continuum-restore 'on'
set -g @continuum-save-interval '10'   # minutos

#####################################################
# TPM bootstrap + init (SEMPRE NO FINAL)
#####################################################
if "test ! -d ~/.config/tmux/plugins/tpm" \
  "run 'git clone https://github.com/tmux-plugins/tpm ~/.config/tmux/plugins/tpm && ~/.config/tmux/plugins/tpm/bin/install_plugins'"

run "$HOME/.config/tmux/plugins/tpm/tpm"
